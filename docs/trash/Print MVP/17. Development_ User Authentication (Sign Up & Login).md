**17\. Development: User Authentication (Sign Up & Login)\*\***

This step implements the user authentication system, allowing users to sign up for a new account and log in to an existing one. This will be handled using the built-in **\*\*Supabase Auth\*\*** service, as specified in the technical guidelines.

**\*\*Actions Taken:\*\***

1\. **\*\*Create Auth Provider:\*\*** A global \`AuthProvider\` is created using React Context to manage and provide the user's session state throughout the application. This makes it easy for any component to access the current user's data.  
2\. **\*\*Build Sign-Up Form:\*\*** A new \`SignUpPage\` component is created with a form for users to register with their email and password. The form uses **\*\*React Hook Form\*\*** for state management and **\*\*Zod\*\*** for validation. On submission, it calls Supabase's \`signUp\` method.  
3\. **\*\*Build Login Form:\*\*** A new \`LoginPage\` component is created with a form for users to log in. It also uses React Hook Form and Zod, and on submission, it calls Supabase's \`signInWithPassword\` method.

Here is the code for the global **\*\*AuthProvider\*\***:

\`\`\`typescript  
// File: src/providers/auth-provider.tsx

import { createContext, useContext, useEffect, useState } from 'react';  
import { supabase } from '@/lib/supabaseClient';  
import { Session } from '@supabase/supabase-js';

type AuthContextType \= {  
 session: Session | null;  
 loading: boolean;  
};

const AuthContext \= createContext\<AuthContextType\>({ session: null, loading: true });

export function AuthProvider({ children }: { children: React.ReactNode }) {  
 const \[session, setSession\] \= useState\<Session | null\>(null);  
 const \[loading, setLoading\] \= useState(true);

useEffect(() \=\> {  
 // Fetch the initial session  
 supabase.auth.getSession().then(({ data: { session } }) \=\> {  
 setSession(session);  
 setLoading(false);  
 });

    // Listen for changes in auth state (login, logout)
    const { data: { subscription } } \= supabase.auth.onAuthStateChange(
      (\_event, session) \=\> {
        setSession(session);
      }
    );

    return () \=\> subscription.unsubscribe();

}, \[\]);

const value \= {  
 session,  
 loading,  
 };

return \<AuthContext.Provider value={value}\>{children}\</AuthContext.Provider\>;  
}

export const useAuth \= () \=\> {  
 return useContext(AuthContext);  
};  
\`\`\`

Here is the code for the **\*\*Sign-Up Page\*\***:

\`\`\`typescript  
// File: src/pages/SignUpPage.tsx

import { useForm } from 'react-hook-form';  
import { zodResolver } from '@hookform/resolvers/zod';  
import \* as z from 'zod';  
import { supabase } from '@/lib/supabaseClient';  
import { Button } from '@/components/ui/button';  
import { Input } from '@/components/ui/input';  
import { Label } from '@/components/ui/label';  
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';

const signUpSchema \= z.object({  
 email: z.string().email(),  
 password: z.string().min(6, 'Password must be at least 6 characters'),  
});

type SignUpFormData \= z.infer\<typeof signUpSchema\>;

export function SignUpPage() {  
 const { register, handleSubmit, formState: { errors } } \= useForm\<SignUpFormData\>({  
 resolver: zodResolver(signUpSchema),  
 });

const onSubmit \= async (data: SignUpFormData) \=\> {  
 try {  
 const { error } \= await supabase.auth.signUp({  
 email: data.email,  
 password: data.password,  
 });  
 if (error) throw error;  
 alert('Check your email for the confirmation link\!');  
 } catch (error: any) {  
 alert(error.error_description || error.message);  
 }  
 };

return (  
 \<div className="p-8 flex justify-center"\>  
 \<Card className="w-full max-w-md"\>  
 \<CardHeader\>\<CardTitle\>Create an Account\</CardTitle\>\</CardHeader\>  
 \<CardContent\>  
 \<form onSubmit={handleSubmit(onSubmit)} className="space-y-4"\>  
 \<div\>  
 \<Label htmlFor="email"\>Email\</Label\>  
 \<Input id="email" type="email" {...register('email')} /\>  
 {errors.email && \<p className="text-red-500 text-sm"\>{errors.email.message}\</p\>}  
 \</div\>  
 \<div\>  
 \<Label htmlFor="password"\>Password\</Label\>  
 \<Input id="password" type="password" {...register('password')} /\>  
 {errors.password && \<p className="text-red-500 text-sm"\>{errors.password.message}\</p\>}  
 \</div\>  
 \<Button type="submit" className="w-full"\>Sign Up\</Button\>  
 \</form\>  
 \</CardContent\>  
 \</Card\>  
 \</div\>  
 );  
}  
\`\`\`
