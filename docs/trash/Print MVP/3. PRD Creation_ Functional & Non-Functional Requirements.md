\#\#\# **\*\*3. PRD Creation: Functional & Non-Functional Requirements\*\***

This section documents the specific functional (what the system does) and non-functional (how the system performs) requirements. Functional requirements are derived from the \`Project Brief\`, while non-functional requirements are derived exclusively from the definitive \`Technical Preferences\` document.

\`\`\`markdown  
\#\# 3\. Requirements

\#\#\# 3.1. Functional Requirements

\* \*\*FR1: Dynamic Product Configuration\*\*  
    \* The system must provide a flexible system allowing customers to configure complex print products based on attributes like Paper Stocks, Print Sizes, Coatings, and Sides.  
\* \*\*FR2: Add-on Services\*\*  
    \* A comprehensive list of defined add-ons (e.g., Digital Proof, Folding, Design Services, Hole Drilling) must be available with various pricing models, and the system must allow admins to create new add-on types.  
\* \*\*FR3: Dynamic Pricing Engine\*\*  
    \* A pricing engine that calculates product costs in real-time based on a defined sequence of calculations is required.  
\* \*\*FR4: Broker System\*\*  
    \* The platform must include a system for managing broker accounts with category-specific discounts that can be set globally or on a per-user basis.  
\* \*\*FR5: Order Management\*\*  
    \* The system must manage a complete order lifecycle with defined statuses and a unique \`Customer Reference / Invoice Number\`.  
\* \*\*FR6: File Upload System\*\*  
    \* A robust system for customers to upload artwork, with defined file type and size limits and clear error handling, is required.  
\* \*\*FR7: Flexible UI Components\*\*  
    \* The platform must support multiple UI styles controllable by an admin, including different navigation, product page, and checkout flows.  
\* \*\*FR8: Customer Account Section\*\*  
    \* A comprehensive "My Account" area is required where users can view order history, see order details, re-order products, and track quotes.  
\* \*\*FR9: Branding & Theming\*\*  
    \* An admin "Theme Editor" to manage multiple logos, a full light/dark mode color palette, and selectable fonts is required to support the white-label-ready architecture.  
\* \*\*FR10: Payment Gateways\*\*  
    \* Integration with Square, CashApp, and PayPal using their standard checkout flows is required. The system will support saved payment methods for registered users.  
\* \*\*FR11: Marketing & Email Platform\*\*  
    \* The platform will include a central CRM/Contacts hub, a visual Email Builder, Email Broadcasts functionality, a rule-based Automation engine, and detailed Analytics.  
\* \*\*FR12: N8n.io Integration\*\*  
    \* Deep integration with n8n.io is required for automating order placement with external vendors, facilitated by a custom API.

\#\#\# 3.2. Non-Functional Requirements

\* \*\*NFR1: Overall Architecture\*\*  
    \* The project will use a Polyrepo approach with separate repositories for the frontend and any custom backend services.   
    \* The service architecture will primarily leverage a Backend-as-a-Service (BaaS) like Supabase.   
    \* If needed, dedicated backend services will be built as a Modular Monolith.   
\* \*\*NFR2: Frontend Technology Stack\*\*  
    \* The core framework will be \*\*React\*\* using \*\*Vite\*\* as the build tool.   
    \* All frontend code will be written in \*\*TypeScript\*\*.   
    \* Styling will be implemented using \*\*Tailwind CSS\*\* with PostCSS and Autoprefixer.  Theming will use CSS Variables.   
    \* The UI component strategy will be \*\*Shadcn/UI\*\*, with icons from \*\*Lucide React\*\*.   
    \* Client-side routing will be handled by \*\*React Router DOM\*\*.   
\* \*\*NFR3: Frontend State Management\*\*  
    \* Server state and data fetching will be managed by \*\*React Query (TanStack Query)\*\*.   
    \* All form state will be managed by \*\*React Hook Form\*\*.   
    \* Global client-side state will start with React's built-in \*\*Context API\*\*, with the option to use \*\*Zustand or Jotai\*\* if needed.   
    \* Schema validation will use \*\*Zod\*\*.   
\* \*\*NFR4: Backend Technology Stack\*\*  
    \* The primary BaaS will be \*\*Supabase\*\*.   
    \* If a custom backend is needed, it will be built with \*\*Node.js and Express.js using TypeScript\*\*.   
    \* Custom APIs will be designed as \*\*RESTful APIs\*\*.   
\* \*\*NFR5: Development & Deployment\*\*  
    \* Version control will be Git with GitHub.  Code quality will be enforced with ESLint and Prettier.   
    \* The testing stack will be \*\*Vitest\*\* or \*\*Jest\*\* with \*\*React Testing Library\*\* for unit/integration tests, and \*\*Playwright or Cypress\*\* for E2E tests.   
    \* Continuous Integration and Deployment will be managed by \*\*GitHub Actions\*\*.   
    \* The frontend will be hosted on a platform like \*\*Vercel\*\* or \*\*Netlify\*\*.   
\`\`\`  
