# Caddyfile for GangrunPrinting.com
# Testing on ports 8080/8443, will switch to 80/443 after migration

:8080 {
    # GangrunPrinting.com
    @gangrun host gangrunprinting.com www.gangrunprinting.com
    handle @gangrun {
        reverse_proxy 172.30.0.21:3002 {
            header_up Host {http.request.host}
            header_up X-Real-IP {http.request.remote}
            header_up X-Forwarded-For {http.request.remote}
            header_up X-Forwarded-Proto {http.request.scheme}
        }
    }

    # Default response for unmatched hosts
    handle {
        respond "Site not configured" 404
    }
}

# HTTPS configuration (will be enabled after testing)
# gangrunprinting.com {
#     reverse_proxy 172.30.0.21:3002
#     tls {
#         on_demand
#     }
# }