# React Hooks Rules - Critical Guidelines

## üö® CRITICAL: React Error #310 Prevention

### NEVER violate the Rules of Hooks

**Hooks must be called in the same order on every render**

‚ùå **WRONG Pattern - Causes Error #310:**
```typescript
function MyComponent() {
  const [state, setState] = useState() // Hook called
  const { data } = useCustomHook() // Another hook

  // WRONG: Returning different components after hooks
  if (type === 'A') return <ComponentA />
  if (type === 'B') return <ComponentB />

  return <ComponentC />
}
```

‚úÖ **CORRECT Pattern:**
```typescript
// Wrapper component - no hooks, only routing
function MyComponent({ type }) {
  // Route to appropriate component BEFORE calling any hooks
  if (type === 'A') return <ComponentA />
  if (type === 'B') return <ComponentB />
  return <ComponentC />
}

// Each component has its own consistent hook usage
function ComponentA() {
  const [state, setState] = useState()
  const { data } = useCustomHook()
  // ... rest of component
}
```

## When You See React Error #310

**Error Message**: "Rendered more hooks than during the previous render"

**Root Cause**: Component is calling hooks, then conditionally returning different components, causing hook count to vary between renders.

**Fix Strategy**:
1. Identify where hooks are called
2. Check if there are conditional returns after hooks
3. Extract hook logic into separate child components
4. Use wrapper component only for routing logic

**Reference Implementation**: 
- File: `src/components/product/ProductConfigurationForm.tsx`
- Lines: 152-247
- Pattern: Wrapper component detects type ‚Üí Routes to specialized component with hooks

## Rules Summary

1. ‚úÖ Always call hooks at the top of component
2. ‚úÖ Never call hooks conditionally
3. ‚úÖ Never return different components after calling hooks
4. ‚úÖ Extract hook logic into separate components when routing is needed
5. ‚úÖ Use wrapper components for conditional rendering logic

## Documentation

- Full troubleshooting: `/root/websites/gangrunprinting/CLAUDE.md` ‚Üí Section "üîç TROUBLESHOOTING CHECKLIST" ‚Üí Item #0
- Recent fixes: `/root/websites/gangrunprinting/CLAUDE.md` ‚Üí Section "RECENT FIXES" ‚Üí React Error #310
